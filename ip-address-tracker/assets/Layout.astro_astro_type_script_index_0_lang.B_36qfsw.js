import{$ as b,a as I,b as p,c as V,d as w,e as k,f as P,m as g,L as y,l as T}from"./Layout.astro_astro_type_script_index_2_lang.CIUoTc_j.js";function D(t){return(new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"short"}).formatToParts(new Date).find(a=>a.type==="timeZoneName")?.value??"unknown").replace("GMT","UTC")}async function h(t){try{const n=await(await fetch(`https://ipinfo.io/${t}?token=141513b224e025`)).json();return A(n)}catch{return{error:"API communication problems"}}}function A(t){const{city:e,error:n,ip:o,loc:a,org:s,postal:l,region:r,timezone:i}=t;if(typeof n=="string")return{error:n};const[u,m]=typeof a=="string"?a.split(","):["0","0"];return{isp:s,ipAddress:o,lng:parseInt(u),lat:parseInt(m),location:`${e}, ${r} ${l}`,timezone:typeof i=="string"?D(i):"unknown"}}function z(t){const e=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/;return typeof t!="string"?{isValid:!1,message:"No text"}:t.length<1?{isValid:!1,message:"Can't be blank"}:e.test(t)?{isValid:!0,message:""}:{isValid:!1,message:"Need valid IP"}}b?.addEventListener("click",t=>{C(t)});async function C(t){t.preventDefault();const n=new FormData(I??void 0).get("ip-value"),o=typeof n=="string"?n.toString().trim():null,{isValid:a,message:s}=z(o??"");if(!a||o==null){p?.setCustomValidity(s),p?.reportValidity();return}p?.setCustomValidity("");const{error:l,ipAddress:r,isp:i,lat:u,lng:m,location:d,timezone:f}=await h(o);if(l!=null)return;[{element:V,value:r,title:r},{element:w,value:d,title:d},{element:k,value:f,title:f},{element:P,value:i,title:i}].forEach(({element:c,value:v,title:$})=>{c!=null&&(c.textContent=v??"-",c.setAttribute("title",$??"-"))}),E(u,m)}function E(t,e){if(e==null||t==null)return;g.setView(new y.LatLng(t,e)),y.marker([e,t],{icon:T}).addTo(g).bindPopup("<b>It's here!</b>").openPopup()}
