import{$,a as b,b as d,m as p,L as g,l as I,c as w,d as V,e as k,f as P}from"./Layout.astro_astro_type_script_index_2_lang.CIUoTc_j.js";function T(t){return(new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"short"}).formatToParts(new Date).find(a=>a.type==="timeZoneName")?.value??"unknown").replace("GMT","UTC")}async function D(t){try{const n=await(await fetch(`https://ipinfo.io/${t}?token=141513b224e025`)).json();return h(n)}catch{return{error:"API communication problems"}}}function h(t){const{city:e,error:n,ip:o,loc:a,org:m,postal:r,region:i,timezone:s}=t;if(typeof n=="string")return{error:n};const[u,l]=typeof a=="string"?a.split(","):["0","0"];return{isp:m,ipAddress:o,lng:parseInt(u),lat:parseInt(l),location:`${e}, ${i} ${r}`,timezone:typeof s=="string"?T(s):"unknown"}}function A(t){const e=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/;return typeof t!="string"?{isValid:!1,message:"No text"}:t.length<1?{isValid:!1,message:"Can't be blank"}:e.test(t)?{isValid:!0,message:""}:{isValid:!1,message:"Need valid IP"}}$?.addEventListener("click",t=>{z(t)});async function z(t){t.preventDefault();const n=new FormData(b??void 0).get("ip-value")?.toString().trim(),{isValid:o,message:a}=A(n??"");if(!o||n==null){d?.setCustomValidity(a),d?.reportValidity();return}d?.setCustomValidity("");const{error:m,ipAddress:r,isp:i,lat:s,lng:u,location:l,timezone:f}=await D(n);if(m!=null)return;[{element:w,value:r,title:r},{element:V,value:l,title:l},{element:k,value:f,title:f},{element:P,value:i,title:i}].forEach(({element:c,value:v,title:y})=>{c!=null&&(c.textContent=v??"-",c.setAttribute("title",y??"-"))}),C(s,u)}function C(t,e){if(e==null||t==null)return;p.setView(new g.LatLng(t,e)),g.marker([e,t],{icon:I}).addTo(p).bindPopup("<b>It's here!</b>").openPopup()}
